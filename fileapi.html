<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<script src="./bower_components/jquery/dist/jquery.min.js"></script>
<script type="text/javascript">
    $(function(){
        $('.upload_button').on('click',()=> {
            $('input[type="file"][name="sample_image"]').trigger('click')
            return false
        })

        $('input[type="file"][name="sample_image"]').on('change', (event)=> {
            var obj = $(event.currentTarget)

            if (!obj || !obj.length || !obj[0].files || !obj[0].files.length) {
                return false
            }

            var fileObj = obj[0].files[0]

            var fr = new FileReader();
            fr.onload = function(e) {
                $('.image_hanei').attr('src', e.target.result)
            }
            fr.readAsDataURL(fileObj)
            console.log('aaaa');
        })

        $('.delete_button').on('click', (event) =>{
            var element = $(event.currentTarget)
            element.parent().find('.fileinput').val('')
            element.parent().find('.image_hanei').attr('src', '')
            return false
        })

    })
</script>
<style type="text/css">
.image_wrapper{
  width: 200px;
  height:200px;
}
.image_wrapper img{
    max-width: 100%;
}
.fileinput{
    display: none;
}
</style>
<body>
    <form action="./">
        <input type="file" name="sample_image" class="fileinput" >
        <button class="upload_button">UPLOAD</button>
        <button class="delete_button">DELETE</button>
        <div class="image_wrapper">
            <img src="" class="image_hanei">
        </div>
    </form>
</body>
</html>
